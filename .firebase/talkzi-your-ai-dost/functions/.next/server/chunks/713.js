exports.id=713,exports.ids=[713],exports.modules={4780:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var o=r(49384),s=r(82348);function n(...e){return(0,s.QP)((0,o.$)(e))}},7900:(e,t,r)=>{"use strict";r.d(t,{CookieConsentBanner:()=>o});let o=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call CookieConsentBanner() from the server but CookieConsentBanner is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/user/studio/src/components/talkzi/CookieConsentBanner.tsx","CookieConsentBanner")},14947:(e,t,r)=>{"use strict";r.d(t,{Toaster:()=>g});var o=r(60687),s=r(29867),n=r(43210),i=r(18810),a=r(24224),l=r(78726),d=r(4780);let u=i.Kq,c=n.forwardRef(({className:e,...t},r)=>(0,o.jsx)(i.LM,{ref:r,className:(0,d.cn)("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));c.displayName=i.LM.displayName;let m=(0,a.F)("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),f=n.forwardRef(({className:e,variant:t,...r},s)=>(0,o.jsx)(i.bL,{ref:s,className:(0,d.cn)(m({variant:t}),e),...r}));f.displayName=i.bL.displayName,n.forwardRef(({className:e,...t},r)=>(0,o.jsx)(i.rc,{ref:r,className:(0,d.cn)("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t})).displayName=i.rc.displayName;let p=n.forwardRef(({className:e,...t},r)=>(0,o.jsx)(i.bm,{ref:r,className:(0,d.cn)("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:(0,o.jsx)(l.A,{className:"h-4 w-4"})}));p.displayName=i.bm.displayName;let h=n.forwardRef(({className:e,...t},r)=>(0,o.jsx)(i.hE,{ref:r,className:(0,d.cn)("text-sm font-semibold",e),...t}));h.displayName=i.hE.displayName;let v=n.forwardRef(({className:e,...t},r)=>(0,o.jsx)(i.VY,{ref:r,className:(0,d.cn)("text-sm opacity-90",e),...t}));function g(){let{toasts:e}=(0,s.dj)();return(0,o.jsxs)(u,{children:[e.map(function({id:e,title:t,description:r,action:s,...n}){return(0,o.jsxs)(f,{...n,children:[(0,o.jsxs)("div",{className:"grid gap-1",children:[t&&(0,o.jsx)(h,{children:t}),r&&(0,o.jsx)(v,{children:r})]}),s,(0,o.jsx)(p,{})]},e)}),(0,o.jsx)(c,{})]})}v.displayName=i.VY.displayName},18864:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,86346,23)),Promise.resolve().then(r.t.bind(r,27924,23)),Promise.resolve().then(r.t.bind(r,35656,23)),Promise.resolve().then(r.t.bind(r,40099,23)),Promise.resolve().then(r.t.bind(r,38243,23)),Promise.resolve().then(r.t.bind(r,28827,23)),Promise.resolve().then(r.t.bind(r,62763,23)),Promise.resolve().then(r.t.bind(r,97173,23))},29131:(e,t,r)=>{"use strict";r.d(t,{AuthProvider:()=>s});var o=r(12907);let s=(0,o.registerClientReference)(function(){throw Error("Attempted to call AuthProvider() from the server but AuthProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/user/studio/src/contexts/AuthContext.tsx","AuthProvider");(0,o.registerClientReference)(function(){throw Error("Attempted to call useAuth() from the server but useAuth is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/user/studio/src/contexts/AuthContext.tsx","useAuth")},29523:(e,t,r)=>{"use strict";r.d(t,{$:()=>d,r:()=>l});var o=r(60687),s=r(43210),n=r(8730),i=r(24224),a=r(4780);let l=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef(({className:e,variant:t,size:r,asChild:s=!1,...i},d)=>{let u=s?n.DX:"button";return(0,o.jsx)(u,{className:(0,a.cn)(l({variant:t,size:r,className:e})),ref:d,...i})});d.displayName="Button"},29867:(e,t,r)=>{"use strict";r.d(t,{dj:()=>m});var o=r(43210);let s=0,n=new Map,i=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),u({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},a=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?i(r):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],d={toasts:[]};function u(e){d=a(d,e),l.forEach(e=>{e(d)})}function c({...e}){let t=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>u({type:"DISMISS_TOAST",toastId:t});return u({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||r()}}}),{id:t,dismiss:r,update:e=>u({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function m(){let[e,t]=o.useState(d);return o.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:c,dismiss:e=>u({type:"DISMISS_TOAST",toastId:e})}}},48340:(e,t,r)=>{Promise.resolve().then(r.bind(r,74042)),Promise.resolve().then(r.bind(r,27833)),Promise.resolve().then(r.bind(r,7900)),Promise.resolve().then(r.bind(r,79737)),Promise.resolve().then(r.bind(r,29131))},60720:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,16444,23)),Promise.resolve().then(r.t.bind(r,16042,23)),Promise.resolve().then(r.t.bind(r,88170,23)),Promise.resolve().then(r.t.bind(r,49477,23)),Promise.resolve().then(r.t.bind(r,29345,23)),Promise.resolve().then(r.t.bind(r,12089,23)),Promise.resolve().then(r.t.bind(r,46577,23)),Promise.resolve().then(r.t.bind(r,31307,23))},61135:()=>{},62646:(e,t,r)=>{"use strict";r.d(t,{CookieConsentBanner:()=>l});var o=r(60687),s=r(43210),n=r(29523),i=r(4780),a=r(29474);function l(){let[e,t]=(0,s.useState)(!1);return e?(0,o.jsx)("div",{className:(0,i.cn)("fixed bottom-0 left-0 right-0 z-[9999] p-4 md:p-6 print:hidden","bg-background/90 border-t border-border shadow-lg backdrop-blur-sm","transition-transform duration-300 ease-out",e?"translate-y-0":"translate-y-full"),role:"dialog","aria-live":"polite","aria-label":"Cookie consent","aria-describedby":"cookie-consent-description",children:(0,o.jsxs)("div",{className:"container mx-auto flex flex-col sm:flex-row items-center justify-between gap-4",children:[(0,o.jsxs)("div",{className:"flex items-start sm:items-center gap-3",children:[(0,o.jsx)(a.A,{className:"h-8 w-8 sm:h-7 sm:w-7 text-primary flex-shrink-0 mt-1 sm:mt-0"}),(0,o.jsx)("p",{id:"cookie-consent-description",className:"text-sm text-foreground",children:"We use cookies to enhance your experience, remember your preferences, and ensure our app functions smoothly. By continuing to use Talkzii, you agree to our use of cookies."})]}),(0,o.jsx)(n.$,{onClick:()=>{try{localStorage.setItem("talkzii_cookie_consent_given","true"),t(!1)}catch(e){console.error("Could not save cookie consent status to localStorage:",e),t(!1)}},className:"gradient-button w-full sm:w-auto px-6 py-2.5 text-sm font-semibold rounded-lg shadow-md hover:shadow-lg transition-shadow whitespace-nowrap","aria-label":"Accept cookies",children:"Got it, thanks!"})]})}):null}},63213:(e,t,r)=>{"use strict";r.d(t,{A:()=>u,AuthProvider:()=>d});var o=r(60687),s=r(43210),n=r.n(s),i=r(79481),a=r(16189);let l=n().createContext(void 0),d=({children:e})=>{let[t,r]=n().useState(null),[d,u]=n().useState(null),[c,m]=n().useState(null),[f,p]=n().useState(!0),[h,v]=n().useState(!0),g=(0,a.useRouter)(),b=(0,a.usePathname)();(0,s.useEffect)(()=>{(async()=>{p(!0),v(!0);try{let{data:{session:e},error:t}=await i.N.auth.getSession();if(t)console.error("Error fetching initial session:",t.message),(t.message.includes("Invalid Refresh Token")||t.message.includes("Refresh Token Not Found")||t.message.includes("invalid_grant"))&&(console.warn("Invalid token detected during initial session fetch, attempting to sign out to clear state."),await i.N.auth.signOut()),u(null),r(null),m(null);else{u(e);let t=e?.user??null;if(r(t),t){let{data:e,error:r}=await i.N.from("profiles").select("*").eq("id",t.id).single();r&&"PGRST116"!==r.code&&console.error("Initial profile fetch error:",r),m(e)}else m(null)}}catch(e){console.error("Critical error during initial data fetch (AuthProvider):",e.message,e),u(null),r(null),m(null)}finally{p(!1),v(!1)}})();let{data:e}=i.N.auth.onAuthStateChange(async(e,o)=>{console.log("Auth State Change Event:",e,o),p(!0),u(o);let s=o?.user??null,n=t?.id;if(r(s),"SIGNED_OUT"===e){if(console.log("User signed out. Clearing profile."),n)try{localStorage.removeItem(`talkzi_chat_history_${n}`),localStorage.removeItem(`talkzi_ai_friend_type_${n}`),localStorage.removeItem(`talkzii_chat_memory_${n}`),localStorage.removeItem(`talkzii_memory_warning_shown_${n}`)}catch(e){console.error("Error clearing user-specific localStorage on sign out",e)}m(null),v(!1),p(!1);return}if(s){v(!0);let{data:e,error:t}=await i.N.from("profiles").select("*").eq("id",s.id).single();t&&"PGRST116"!==t.code&&console.error("Error fetching profile on auth change:",t),m(e),v(!1)}else m(null),v(!1);p(!1)});return()=>{e?.subscription.unsubscribe()}},[]),(0,s.useEffect)(()=>{if(f)return;let e="/auth"===b;d&&e&&g.push("/aipersona")},[d,b,g,f]);let x=async()=>{let{error:e}=await i.N.auth.signOut();e&&console.error("Error signing out: ",e)},y=f||!!t&&h,w=(0,s.useMemo)(()=>({user:t,session:d,profile:c,isLoading:y,signOut:x}),[t,d,c,y]);return(0,o.jsx)(l.Provider,{value:w,children:e})},u=()=>{let e=n().useContext(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider. Check your component tree and ensure AuthProvider is an ancestor, especially in layout.tsx or equivalent files. If this error persists after confirming the provider setup, try deleting your .next folder and restarting the dev server to clear potential caching issues.");return e}},79481:(e,t,r)=>{"use strict";r.d(t,{N:()=>o});let o=(0,r(94025).UU)("https://your-supabase-url.supabase.co","your-supabase-anon-key",{auth:{persistSession:!0,autoRefreshToken:!0}})},79737:(e,t,r)=>{"use strict";r.d(t,{Toaster:()=>o});let o=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call Toaster() from the server but Toaster is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/user/studio/src/components/ui/toaster.tsx","Toaster")},84724:(e,t,r)=>{Promise.resolve().then(r.bind(r,46380)),Promise.resolve().then(r.bind(r,72847)),Promise.resolve().then(r.bind(r,62646)),Promise.resolve().then(r.bind(r,14947)),Promise.resolve().then(r.bind(r,63213))},94431:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>y,metadata:()=>x});var o=r(37413),s=r(83736),n=r.n(s),i=r(30461),a=r.n(i),l=r(64988),d=r.n(l),u=r(48420),c=r.n(u),m=r(53290),f=r.n(m);r(61135);var p=r(79737),h=r(74042),v=r(27833),g=r(29131),b=r(7900);let x={title:"Talkzi AI - Your Desi Bestie",description:"AI-powered emotional support assistant for Gen Z in India.",manifest:"/manifest.json",themeColor:"#F5F8FF",appleWebAppCapable:"yes",appleWebAppStatusBarStyle:"default"};function y({children:e}){return(0,o.jsxs)("html",{lang:"en",className:`${c().variable} ${n().variable} ${a().variable} ${d().variable} ${f().variable}`,children:[(0,o.jsx)("head",{}),(0,o.jsx)("body",{className:"antialiased flex flex-col min-h-screen bg-background text-foreground font-poppins",children:(0,o.jsxs)(g.AuthProvider,{children:[(0,o.jsx)("div",{className:"flex-grow",children:e}),(0,o.jsx)(p.Toaster,{}),(0,o.jsx)(b.CookieConsentBanner,{})," ",(0,o.jsx)(h.Analytics,{}),(0,o.jsx)(v.SpeedInsights,{})]})})]})}}};