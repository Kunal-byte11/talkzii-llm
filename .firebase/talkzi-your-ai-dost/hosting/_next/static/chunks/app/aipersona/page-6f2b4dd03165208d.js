(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8919],{790:(e,t,a)=>{Promise.resolve().then(a.bind(a,3685))},1721:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(157).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},3349:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(157).A)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},3685:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>j});var r=a(5155),i=a(2115),l=a(5695),s=a(285),o=a(8309),n=a(6874),d=a.n(n),c=a(8186),u=a(3349),h=a(1721),m=a(7481),x=a(283),g=a(7427),f=a(6766),p=a(9434),v=a(8547),y=a(34);let b=e=>e?"talkzii_ai_friend_type_".concat(e):"talkzii_ai_friend_type_guest",k=e=>e?"talkzii_chat_history_".concat(e):"talkzii_chat_history_guest";function j(){let e=(0,l.useRouter)(),{user:t,signOut:a,isLoading:n}=(0,x.A)(),[j,w]=(0,i.useState)("default"),[N,_]=(0,i.useState)(!0),[z,A]=(0,i.useState)(!1),{toast:C}=(0,m.dj)(),S=(0,i.useMemo)(()=>b(null==t?void 0:t.id),[null==t?void 0:t.id]);(0,i.useEffect)(()=>{if(!n){if(_(!0),t)try{let e=localStorage.getItem(S);w(e||"default")}catch(e){console.error("Error reading persona from localStorage for user",e),w("default")}else w("default");_(!1)}},[n,S,t]);let T=()=>{w("default"),A(!0),setTimeout(()=>{try{localStorage.removeItem(b(void 0)),localStorage.removeItem(k(void 0)),C({title:"Continuing as Guest",description:"You'll be chatting with Talkzii (default)."})}catch(e){console.error("Error clearing guest localStorage",e)}e.push("/chat")},50)},E=a=>{if(!t){if("default"===a)w("default"),T();else{var r;let e=(null===(r=v.De.find(e=>e.value===a))||void 0===r?void 0:r.label)||"this persona";C({title:"Login to Use Persona",description:"Please log in to chat with ".concat(e,". Guests chat with Talkzii (default).")})}return}w(a),A(!0),setTimeout(()=>{try{if((localStorage.getItem(S)||"default")!==a){let e=k(t.id);localStorage.removeItem(e),C({title:"Persona Changed",description:"Your chat history has been cleared for the new persona."})}"default"===a?localStorage.removeItem(S):localStorage.setItem(S,a)}catch(e){console.error("Error during persona confirmation/localStorage operations for user",e),C({title:"Error",description:"Could not save your persona preference or clear chat history.",variant:"destructive"})}e.push("/chat")},50)};if(n||N||z){var H;let e=z?"Preparing chat with ".concat((null===(H=v.De.find(e=>e.value===j))||void 0===H?void 0:H.label)||"Talkzii","..."):n?"Verifying authentication...":"Loading persona settings...";return(0,r.jsx)(g.k,{message:e})}return(0,r.jsxs)("div",{className:"relative flex size-full min-h-screen flex-col bg-background justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("header",{className:"flex items-center bg-background p-4 pb-2 justify-between",children:[(0,r.jsx)(d(),{href:"/",passHref:!0,children:(0,r.jsx)(o.g,{width:84,height:28})}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(s.$,{variant:"ghost",size:"icon",asChild:!0,title:"Home Page",children:(0,r.jsxs)(d(),{href:"/",children:[(0,r.jsx)(c.A,{className:"h-5 w-5 text-muted-foreground"}),(0,r.jsx)("span",{className:"sr-only",children:"Home"})]})}),t?(0,r.jsxs)(s.$,{variant:"link",onClick:a,className:"text-muted-foreground text-base font-bold leading-normal tracking-[0.015em] shrink-0 p-0 h-auto hover:no-underline hover:text-primary",title:"Logout",children:[(0,r.jsx)(u.A,{className:"h-5 w-5 mr-1 sm:mr-0 md:mr-1"}),(0,r.jsx)("span",{className:"hidden md:inline",children:"Logout"})]}):(0,r.jsx)(s.$,{variant:"link",onClick:()=>e.push("/auth"),className:"text-primary text-base font-bold",children:"Login"})]})]}),(0,r.jsx)(y.z,{}),t&&(0,r.jsx)("div",{className:"px-4 pt-3 text-left",children:(0,r.jsxs)("p",{className:"text-sm text-muted-foreground mb-1 flex items-center justify-start",children:[(0,r.jsx)(h.A,{className:"h-4 w-4 mr-1 text-primary"})," Logged in as: ",t.email]})}),(0,r.jsx)("h2",{className:"text-foreground text-[22px] font-bold leading-tight tracking-[-0.015em] px-4 pb-3 pt-5 text-left",children:"Choose your Talkzii"}),(0,r.jsx)("div",{className:"grid grid-cols-[repeat(auto-fit,minmax(158px,1fr))] gap-3 p-4 @[480px]:grid-cols-[repeat(auto-fit,minmax(180px,1fr))] @lg:grid-cols-[repeat(auto-fit,minmax(200px,1fr))]",children:v.De.map(e=>(0,r.jsxs)("div",{onClick:()=>E(e.value),className:(0,p.cn)("flex flex-col gap-3 text-center pb-3 items-center p-3 rounded-xl border-2 transition-all duration-200 ease-in-out hover:shadow-lg cursor-pointer",j===e.value?"border-primary ring-2 ring-primary shadow-xl bg-primary/5":"border-border bg-card hover:border-primary/50",!t&&"default"!==e.value&&"opacity-70 hover:border-border hover:shadow-none"),children:[(0,r.jsx)("div",{className:"relative px-4 w-32 h-32 sm:w-36 sm:h-36 md:w-40 md:h-40",children:(0,r.jsx)(f.default,{src:e.imageUrl,alt:e.label,layout:"fill",objectFit:"cover","data-ai-hint":e.imageHint,className:"rounded-full"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-foreground text-base font-medium leading-normal",children:e.label}),(0,r.jsx)("p",{className:"text-muted-foreground text-sm font-normal leading-normal px-1",children:e.description})]})]},e.value))}),!t&&(0,r.jsx)("div",{className:"px-4 py-6 mt-4",children:(0,r.jsx)(s.$,{onClick:T,className:"w-full gradient-button text-lg py-3 rounded-lg shadow-md hover:shadow-lg transition-shadow","aria-label":"Chat with Talkzii (Default)",children:"Chat with Talkzii (Default)"})})]}),(0,r.jsx)("footer",{className:"py-6 border-t border-border",children:(0,r.jsx)("div",{className:"container mx-auto px-4 text-center text-xs text-muted-foreground",children:(0,r.jsxs)("p",{children:["\xa9 ",new Date().getFullYear()," Talkzii. Change your AI's vibe anytime!"]})})})]})}},5318:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(157).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},8186:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(157).A)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[4277,6874,6629,7378,9138,8441,1684,7358],()=>t(790)),_N_E=e.O()}]);