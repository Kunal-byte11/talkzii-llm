"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9138],{34:(e,t,r)=>{r.d(t,{z:()=>u});var o=r(5155),a=r(2115),s=r(5318),n=r(285),i=r(9434);let l="talkzii_coming_soon_banner_dismissed_v2";function u(){let[e,t]=(0,a.useState)(!0);return((0,a.useEffect)(()=>{try{let e=localStorage.getItem(l);"true"===e&&t(!1)}catch(e){console.warn("Could not read from localStorage for ComingSoonBanner:",e)}},[]),e)?(0,o.jsxs)("div",{className:(0,i.cn)("relative w-full p-3 text-center text-white","bg-gradient-to-r from-red-500 via-rose-500 to-red-600","shadow-md print:hidden"),children:[(0,o.jsx)("p",{className:"font-semibold text-sm sm:text-base",children:"\uD83D\uDE80 Talkzii 1.0 is Coming Soon! Get ready for an even better experience. âœ¨"}),(0,o.jsx)(n.$,{variant:"ghost",size:"icon",onClick:()=>{t(!1);try{localStorage.setItem(l,"true")}catch(e){console.warn("Could not write to localStorage for ComingSoonBanner:",e)}},className:"absolute top-1/2 right-2 sm:right-4 -translate-y-1/2 h-7 w-7 sm:h-8 sm:w-8 text-white hover:bg-white/20 hover:text-white","aria-label":"Dismiss coming soon banner",children:(0,o.jsx)(s.A,{className:"h-4 w-4 sm:h-5 sm:w-5"})})]}):null}},283:(e,t,r)=>{r.d(t,{A:()=>u,AuthProvider:()=>l});var o=r(5155),a=r(2115),s=r(2643),n=r(5695);let i=a.createContext(void 0),l=e=>{let{children:t}=e,[r,l]=a.useState(null),[u,c]=a.useState(null),[d,h]=a.useState(null),[f,g]=a.useState(!0),[m,p]=a.useState(!0),v=(0,n.useRouter)(),b=(0,n.usePathname)();(0,a.useEffect)(()=>{(async()=>{g(!0),p(!0);try{let{data:{session:t},error:r}=await s.N.auth.getSession();if(r)console.error("Error fetching initial session:",r.message),(r.message.includes("Invalid Refresh Token")||r.message.includes("Refresh Token Not Found")||r.message.includes("invalid_grant"))&&(console.warn("Invalid token detected during initial session fetch, attempting to sign out to clear state."),await s.N.auth.signOut()),c(null),l(null),h(null);else{var e;c(t);let r=null!==(e=null==t?void 0:t.user)&&void 0!==e?e:null;if(l(r),r){let{data:e,error:t}=await s.N.from("profiles").select("*").eq("id",r.id).single();t&&"PGRST116"!==t.code&&console.error("Initial profile fetch error:",t),h(e)}else h(null)}}catch(e){console.error("Critical error during initial data fetch (AuthProvider):",e.message,e),c(null),l(null),h(null)}finally{g(!1),p(!1)}})();let{data:e}=s.N.auth.onAuthStateChange(async(e,t)=>{var o;console.log("Auth State Change Event:",e,t),g(!0),c(t);let a=null!==(o=null==t?void 0:t.user)&&void 0!==o?o:null,n=null==r?void 0:r.id;if(l(a),"SIGNED_OUT"===e){if(console.log("User signed out. Clearing profile."),n)try{localStorage.removeItem("talkzi_chat_history_".concat(n)),localStorage.removeItem("talkzi_ai_friend_type_".concat(n)),localStorage.removeItem("talkzii_chat_memory_".concat(n)),localStorage.removeItem("talkzii_memory_warning_shown_".concat(n))}catch(e){console.error("Error clearing user-specific localStorage on sign out",e)}h(null),p(!1),g(!1);return}if(a){p(!0);let{data:e,error:t}=await s.N.from("profiles").select("*").eq("id",a.id).single();t&&"PGRST116"!==t.code&&console.error("Error fetching profile on auth change:",t),h(e),p(!1)}else h(null),p(!1);g(!1)});return()=>{null==e||e.subscription.unsubscribe()}},[]),(0,a.useEffect)(()=>{if(f)return;let e="/auth"===b;u&&e&&v.push("/aipersona")},[u,b,v,f]);let y=async()=>{let{error:e}=await s.N.auth.signOut();e&&console.error("Error signing out: ",e)},S=f||!!r&&m,_=(0,a.useMemo)(()=>({user:r,session:u,profile:d,isLoading:S,signOut:y}),[r,u,d,S]);return(0,o.jsx)(i.Provider,{value:_,children:t})},u=()=>{let e=a.useContext(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider. Check your component tree and ensure AuthProvider is an ancestor, especially in layout.tsx or equivalent files. If this error persists after confirming the provider setup, try deleting your .next folder and restarting the dev server to clear potential caching issues.");return e}},285:(e,t,r)=>{r.d(t,{$:()=>u,r:()=>l});var o=r(5155),a=r(2115),s=r(9708),n=r(2085),i=r(9434);let l=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),u=a.forwardRef((e,t)=>{let{className:r,variant:a,size:n,asChild:u=!1,...c}=e,d=u?s.DX:"button";return(0,o.jsx)(d,{className:(0,i.cn)(l({variant:a,size:n,className:r})),ref:t,...c})});u.displayName="Button"},2643:(e,t,r)=>{r.d(t,{N:()=>o});let o=(0,r(851).UU)("https://your-supabase-url.supabase.co","your-supabase-anon-key",{auth:{persistSession:!0,autoRefreshToken:!0}})},7427:(e,t,r)=>{r.d(t,{k:()=>s});var o=r(5155),a=r(8309);function s(e){let{message:t="Loading..."}=e;return(0,o.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-background p-4",children:[(0,o.jsx)(a.g,{className:"h-10 w-auto mb-4 animate-pulse"}),(0,o.jsx)("p",{className:"text-muted-foreground",children:t})]})}},7481:(e,t,r)=>{r.d(t,{dj:()=>h});var o=r(2115);let a=0,s=new Map,n=e=>{if(s.has(e))return;let t=setTimeout(()=>{s.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);s.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?n(r):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],u={toasts:[]};function c(e){u=i(u,e),l.forEach(e=>{e(u)})}function d(e){let{...t}=e,r=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),o=()=>c({type:"DISMISS_TOAST",toastId:r});return c({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||o()}}}),{id:r,dismiss:o,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function h(){let[e,t]=o.useState(u);return o.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:d,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},8309:(e,t,r)=>{r.d(t,{g:()=>s});var o=r(5155),a=r(6766);function s(e){let{width:t,height:r,...s}=e;return(0,o.jsx)(a.default,{src:"/icons/assets/logo1.png",alt:"Talkzii Logo",width:t||150,height:r||100,...s})}},8547:(e,t,r)=>{r.d(t,{De:()=>o,E_:()=>s,N_:()=>a});let o=[{value:"default",label:"Talkzii",description:"Your default, empathetic AI companion for all moods.",imageHint:"abstract companion",imageUrl:"/icons/assets/talzii.png",theme:{primaryColor:"hsl(var(--primary))",accentColor:"hsl(var(--accent))",bubbleTextColor:"hsl(var(--primary-foreground))",fontClassName:"font-poppins"}},{value:"wise_dadi",label:"Wise Dadi",description:"A comforting grandma with desi wisdom and love.",imageHint:"grandmother wisdom",imageUrl:"/icons/assets/dadi.jpg",theme:{primaryColor:"hsl(35, 65%, 70%)",accentColor:"hsl(340, 70%, 85%)",bubbleTextColor:"hsl(35, 40%, 20%)",fontClassName:"font-hind"}},{value:"chill_bro",label:"Chill Bro",description:"A laid-back bestie to help you vibe and de-stress.",imageHint:"friendly confident",imageUrl:"/icons/assets/chillbro.png",theme:{primaryColor:"hsl(195, 53%, 79%)",accentColor:"hsl(180, 40%, 90%)",bubbleTextColor:"hsl(195, 25%, 20%)",fontClassName:"font-plus-jakarta-sans"}},{value:"geeky_bhai",label:"Geeky Bhai",description:"A nerdy topper for practical tips and quirky humor.",imageHint:"smart glasses",imageUrl:"/icons/assets/nerdyfriend.png",theme:{primaryColor:"hsl(225, 50%, 55%)",accentColor:"hsl(75, 85%, 60%)",bubbleTextColor:"hsl(0, 0%, 100%)",fontClassName:"font-geist-mono"}},{value:"flirty_diva",label:"Flirty Diva",description:"A sassy gal for playful, flirty chats.",imageHint:"fashion glamour",imageUrl:"/icons/assets/Flirty Dia.png",theme:{primaryColor:"hsl(330, 80%, 60%)",accentColor:"hsl(25, 80%, 80%)",bubbleTextColor:"hsl(0, 0%, 100%)",fontClassName:"font-poppins"}},{value:"cheeky_lad",label:"Cheeky Lad",description:"A charming guy for cheeky, flirty banter.",imageHint:"playful smile",imageUrl:"/icons/assets/Cheeky Lad.png",theme:{primaryColor:"hsl(0, 60%, 50%)",accentColor:"hsl(45, 85%, 65%)",bubbleTextColor:"hsl(0, 0%, 100%)",fontClassName:"font-poppins"}}],a=()=>{var e;return(null===(e=o.find(e=>"default"===e.value))||void 0===e?void 0:e.imageUrl)||"/icons/assets/talzii.png"},s=e=>{let t=o.find(t=>t.value===(e||"default"));return null==t?void 0:t.theme}},9434:(e,t,r)=>{r.d(t,{cn:()=>s});var o=r(2596),a=r(9688);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.QP)((0,o.$)(t))}}}]);